/*! jquery.validator.js (git@github.com:oosugi20/jquery.validator.js.git)
* 
 * lastupdate: 2014-01-13
 * version: 0.1.1
 * author: Makoto OOSUGI <oosugi20@gmail.com>
 * License: MIT
 */
!function(a){"use script";var b,c="Validator",d="validator";b=function(b,c){this.el=b,this.$el=a(b),this.options=a.extend({},c)},function(b){b.init=function(){var a=this;this.$input=this.$el.find("[data-validator-input]"),this.$errormsg=this.$el.find("[data-validator-errormsg]"),this.type=this.$el.find("[data-validator-type]").attr("data-validator-type"),this.required="true"===this.$el.find("[data-validator-required]").attr("data-validator-required")?!0:!1,this.minsize=this.$el.find("[data-validator-minsize]").attr("data-validator-minsize"),this.event=this.$el.find("[data-validator-event]").attr("data-validator-event"),this.validates={type:function(){return!0},required:function(){return!0},minsize:function(){return!0}},this.results={type:!0,required:!a.required,minsize:!0},this._setTypeValidate(),this._setRequiredValidate(),this._setMinSizeValidate(),this._eventify(),this.$el.trigger("validator:ready")},b._eventify=function(){var b=this;this.$el.on(this.event,"[data-validator-input]",function(){b.validate()}),this.$el.on("validator:error",function(a,c){b.showErrorMsg(c)}),this.$el.on("validator:ok",function(a,c){b.hideErrorMsg(c)}),this.required||this.$el.on(this.event,function(){a(this).find(b.$input).val()||a.each(b.results,function(a){b.results[a]=!0,b.hideErrorMsg(a)})})},b.showErrorMsg=function(a){this.$errormsg.filter('[data-validator-errormsg="'+a+'"]').show()},b.hideErrorMsg=function(a){this.$errormsg.filter('[data-validator-errormsg="'+a+'"]').hide()},b.validate=function(){var b=this;a.each(this.validates,function(a,c){b.results[a]=c(),b.results[a]===!1?b.$el.trigger("validator:error",a):b.$el.trigger("validator:ok",a)}),this.$el.trigger("validator:validate")},b.ok=function(){var b=!0;return a.each(this.results,function(a,c){return c?void 0:(b=!1,!1)}),b},b._setTypeValidate=function(){switch(this.type){case"alphabet":this.validates.type=a.proxy(this.isAlphabet,this);break;case"number":this.validates.type=a.proxy(this.isNumber,this);break;case"alphabet-or-number":this.validates.type=a.proxy(this.isAlphabetOrNumber,this);break;case"alphabet-and-number":this.validates.type=a.proxy(this.isAlphabetAndNumber,this);break;case"fullwidthchar":this.validates.type=a.proxy(this.isFullWidthChar,this);break;case"select":}},b._setRequiredValidate=function(){this.required===!0&&(this.validates.required=a.proxy(this.isRequired,this))},b._setMinSizeValidate=function(){this.minsize&&(this.validates.minsize=a.proxy(this.testMinSize,this))},b.isRequired=function(){var a=!!this.$input.val();return("radio"===this.type||"checkbox"===this.type)&&(a=!!this.$input.filter(":checked").val()),a},b.isAlphabet=function(){return/^[a-zA-Z]+$/.test(this.$input.val())},b.hasAlphabet=function(){return/^.*[a-zA-Z].*$/.test(this.$input.val())},b.hasNumber=function(){return/^.*[0-9].*$/.test(this.$input.val())},b.isNumber=function(){return/^[0-9]+$/.test(this.$input.val())},b.isAlphabetOrNumber=function(){return/^[a-zA-Z0-9]+$/.test(this.$input.val())},b.isAlphabetAndNumber=function(){return this.isAlphabetOrNumber()&&this.hasAlphabet()&&this.hasNumber()},b.isFullWidthChar=function(){return/^[^ -~｡-ﾟ\t　]+$/.test(this.$input.val())},b.testMinSize=function(){return this.minsize<=this.$input.val().length}}(b.prototype),a.fn[d]=function(c){return this.each(function(){var e;a.data(this,d)||(e=new b(this,c),a.data(this,d,e),e.init())})},a[c]=b;var e=function(b,c){this.el=b,this.$el=a(b),this.options=a.extend({},c)};!function(b){b.init=function(){var a=this;this.$item=this.$el.find("[data-validator]"),this.$result=this.$el.find("[data-validatorgrp-result]"),this.$item.on("validator:validate",function(){a.testAllInputed()}),this.$el.on("validatorgrp:allinputed",function(){a.test()}),this.$el.on("validatorgrp:ok",function(){a.$result.filter('[data-validatorgrp-result="error"]').hide(),a.$result.filter('[data-validatorgrp-result="ok"]').show()}),this.$el.on("validatorgrp:error",function(){a.$result.filter('[data-validatorgrp-result="ok"]').hide(),a.$result.filter('[data-validatorgrp-result="error"]').show()})},b.test=function(){var b=!0;return this.$item.each(function(){return a(this).data("validator").ok()?void 0:(b=!1,!1)}),b?this.$el.trigger("validatorgrp:ok"):this.$el.trigger("validatorgrp:error"),b},b.testAllInputed=function(){var b=!0,c=this;return this.$item.each(function(){var c=a(this).find('[data-validator-required="true"]');return c.length&&!c.val()?(b=!1,!1):void 0}),b&&setTimeout(function(){c.$el.trigger("validatorgrp:allinputed")},4),b}}(e.prototype),a.fn.validatorgrp=function(b){return this.each(function(){var c;a.data(this,"validatorgrp")||(c=new e(this,b),a.data(this,"validatorgrp",c),c.init())})},a.Validatorgrp=e;var f=function(b,c){this.el=b,this.$el=a(b),this.options=a.extend({},c)};!function(b){b.init=function(){var a=this;this.$submit=this.$el.find("[data-validatorform-submit]"),this.$submit.addClass("disabled"),this.$item=this.$el.find("[data-validator]"),this.$el.on("validator:validate",function(){a.test()}),this.$el.on("validatorform:ok",function(){a.$submit.removeClass("disabled"),a.$submit.addClass("enabled")}),this.$el.on("validatorform:error",function(){a.$submit.addClass("disabled"),a.$submit.removeClass("enabled")})},b.test=function(){var b=!0;return this.$item.each(function(){return a(this).data("validator").ok()?void 0:(b=!1,!1)}),b?this.$el.trigger("validatorform:ok"):this.$el.trigger("validatorform:error"),b}}(f.prototype),a.fn.validatorform=function(b){return this.each(function(){var c;a.data(this,"validatorform")||(c=new f(this,b),a.data(this,"validatorform",c),c.init())})},a.Validatorform=f}(jQuery,this);